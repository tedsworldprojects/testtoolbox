<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEDS WORLD PROJECTS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for a more modern look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #18181b; /* zinc-900 */
        }
        ::-webkit-scrollbar-thumb {
            background: #52525b; /* zinc-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #71717a; /* zinc-500 */
        }
        .icon {
            width: 1.25rem;
            height: 1.25rem;
        }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-zinc-950 text-zinc-200">
    <div class="min-h-screen bg-zinc-950 font-sans p-4 sm:p-6 lg:p-8">
      <div class="max-w-7xl mx-auto">
        <header class="text-center mb-12">
          <h1 class="text-5xl sm:text-6xl font-black tracking-tighter bg-gradient-to-r from-sky-400 to-cyan-300 bg-clip-text text-transparent">
            TEDS WORLD PROJECTS
          </h1>
          <p class="mt-3 text-lg text-zinc-400 max-w-2xl mx-auto">
            A suite of essential, modern tools for electronics engineers and hobbyists.
          </p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Resistor Decoder Card -->
            <div class="bg-zinc-900/50 backdrop-blur-sm border border-zinc-800 rounded-2xl shadow-2xl shadow-black/20 p-6 flex flex-col">
                <h2 class="text-2xl font-bold text-cyan-400 mb-4 tracking-tight">Resistor Color Code</h2>
                <div class="flex flex-col h-full">
                    <p class="text-zinc-400 mb-4 text-sm">Enter 4 or 5 comma-separated color names.</p>
                    <input type="text" id="resistor-bands-input" value="brown, black, orange, gold" placeholder="e.g., brown, black, orange, gold" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-lg px-3 py-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow" />
                    <button id="decode-resistor-btn" class="mt-4 w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105">Decode</button>
                    <div id="resistor-result-wrapper" class="mt-4 bg-zinc-950/70 rounded-xl p-4 flex-grow min-h-[100px] flex items-center justify-center relative">
                        <p class="text-zinc-600">Result will appear here</p>
                    </div>
                </div>
            </div>

            <!-- Ohm's Law Calculator Card -->
            <div class="bg-zinc-900/50 backdrop-blur-sm border border-zinc-800 rounded-2xl shadow-2xl shadow-black/20 p-6 flex flex-col">
                <h2 class="text-2xl font-bold text-cyan-400 mb-4 tracking-tight">Ohm's Law Calculator</h2>
                <div class="flex flex-col h-full">
                    <div class="space-y-4">
                        <div class="relative">
                            <label class="block text-sm font-medium text-zinc-400 mb-1">Voltage</label>
                            <input type="number" id="ohms-voltage" placeholder="?" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-lg pl-3 pr-10 py-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow" />
                            <span class="absolute inset-y-0 right-0 top-6 flex items-center pr-3 text-zinc-500">V</span>
                        </div>
                        <div class="relative">
                            <label class="block text-sm font-medium text-zinc-400 mb-1">Current</label>
                            <input type="number" id="ohms-current" placeholder="?" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-lg pl-3 pr-10 py-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow" />
                            <span class="absolute inset-y-0 right-0 top-6 flex items-center pr-3 text-zinc-500">A</span>
                        </div>
                        <div class="relative">
                            <label class="block text-sm font-medium text-zinc-400 mb-1">Resistance</label>
                            <input type="number" id="ohms-resistance" placeholder="?" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-lg pl-3 pr-10 py-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow" />
                            <span class="absolute inset-y-0 right-0 top-6 flex items-center pr-3 text-zinc-500">Ω</span>
                        </div>
                    </div>
                    <div class="flex space-x-2 mt-4">
                        <button id="calculate-ohms-btn" class="flex-grow bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105">Calculate</button>
                        <button id="clear-ohms-btn" class="bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">Clear</button>
                    </div>
                    <div id="ohms-result-wrapper" class="mt-4 bg-zinc-950/70 rounded-xl p-4 flex-grow min-h-[100px] flex items-center justify-center relative">
                        <p class="text-zinc-600">Result will appear here</p>
                    </div>
                </div>
            </div>

            <!-- Capacitor Lookup Card -->
            <div class="bg-zinc-900/50 backdrop-blur-sm border border-zinc-800 rounded-2xl shadow-2xl shadow-black/20 p-6 flex flex-col">
                <h2 class="text-2xl font-bold text-cyan-400 mb-4 tracking-tight">Capacitor Value Lookup</h2>
                <div class="flex flex-col h-full">
                    <p class="text-zinc-400 mb-4 text-sm">Find the closest standard E12/E24 capacitor value.</p>
                    <input type="text" id="capacitor-value-input" value="0.1uF" placeholder="e.g., 4.7nF" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-lg px-3 py-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow" />
                    <button id="find-capacitor-btn" class="mt-4 w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105">Find Standard Value</button>
                    <div id="capacitor-result-wrapper" class="mt-4 bg-zinc-950/70 rounded-xl p-4 flex-grow min-h-[100px] flex items-center justify-center relative">
                        <p class="text-zinc-600">Result will appear here</p>
                    </div>
                </div>
            </div>
        </main>
        
        <section class="mt-12">
            <div class="bg-zinc-900/50 backdrop-blur-sm border border-zinc-800 rounded-2xl shadow-2xl shadow-black/20 p-6 flex flex-col">
                <h2 class="text-2xl font-bold text-cyan-400 mb-4 tracking-tight">Recent Calculations</h2>
                <div id="history-content"></div>
            </div>
        </section>

        <footer class="text-center mt-16 text-zinc-600 text-sm">
            <p>Designed and built for the modern engineer.</p>
            <p>&copy; 2025 TEDS WORLD PROJECTS</p>
        </footer>
      </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- CONSTANTS ---
    const RESISTOR_BANDS = {
        black:  { digit: 0, multiplier: 1 },
        brown:  { digit: 1, multiplier: 10, tolerance: 1 },
        red:    { digit: 2, multiplier: 100, tolerance: 2 },
        orange: { digit: 3, multiplier: 1000 },
        yellow: { digit: 4, multiplier: 10000 },
        green:  { digit: 5, multiplier: 100000, tolerance: 0.5 },
        blue:   { digit: 6, multiplier: 1000000, tolerance: 0.25 },
        violet: { digit: 7, multiplier: 10000000, tolerance: 0.1 },
        grey:   { digit: 8, multiplier: 100000000, tolerance: 0.05 },
        white:  { digit: 9, multiplier: 1000000000 },
        gold:   { digit: -1, multiplier: 0.1, tolerance: 5 },
        silver: { digit: -2, multiplier: 0.01, tolerance: 10 },
    };

    const E_SERIES = {
        E12: [1.0, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2],
        E24: [1.0, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2.0, 2.2, 2.4, 2.7, 3.0, 3.3, 3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1],
    };

    const ICONS = {
        copy: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>`,
        check: `<svg xmlns="http://www.w3.org/2000/svg" class="icon text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`,
        save: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>`
    };

    // --- DOM ELEMENTS ---
    const resistorBandsInput = document.getElementById('resistor-bands-input');
    const decodeResistorBtn = document.getElementById('decode-resistor-btn');
    const resistorResultWrapper = document.getElementById('resistor-result-wrapper');

    const ohmsVoltageInput = document.getElementById('ohms-voltage');
    const ohmsCurrentInput = document.getElementById('ohms-current');
    const ohmsResistanceInput = document.getElementById('ohms-resistance');
    const calculateOhmsBtn = document.getElementById('calculate-ohms-btn');
    const clearOhmsBtn = document.getElementById('clear-ohms-btn');
    const ohmsResultWrapper = document.getElementById('ohms-result-wrapper');

    const capacitorValueInput = document.getElementById('capacitor-value-input');
    const findCapacitorBtn = document.getElementById('find-capacitor-btn');
    const capacitorResultWrapper = document.getElementById('capacitor-result-wrapper');
    
    const historyContent = document.getElementById('history-content');

    // --- HISTORY MANAGEMENT ---
    let history = [];

    const loadHistory = () => {
        try {
            const storedHistory = localStorage.getItem('calcHistory');
            history = storedHistory ? JSON.parse(storedHistory) : [];
        } catch (e) {
            console.error("Could not load history:", e);
            history = [];
        }
    };
    
    const saveHistory = () => {
        localStorage.setItem('calcHistory', JSON.stringify(history));
    };

    const addToHistory = (tool, input, output) => {
        const newCalculation = {
            id: crypto.randomUUID(),
            tool,
            input,
            output,
            timestamp: Date.now(),
        };
        history.unshift(newCalculation);
        history = history.slice(0, 5);
        saveHistory();
        renderHistory();
    };

    const renderHistory = () => {
        if (history.length === 0) {
            historyContent.innerHTML = `
                <div class="flex items-center justify-center h-full min-h-[100px]">
                    <p class="text-zinc-600">Your saved calculations will appear here.</p>
                </div>`;
            return;
        }

        const historyList = history.map(calc => `
            <li class="bg-zinc-800/50 p-3 rounded-lg text-sm border border-zinc-700/50">
                <p class="font-semibold text-cyan-400">${calc.tool}</p>
                <p class="text-zinc-300 font-mono text-xs mt-1">
                    <span class="text-zinc-500 font-sans">IN:</span> ${calc.input}
                </p>
                <p class="text-emerald-400 font-mono text-xs">
                    <span class="text-zinc-500 font-sans">OUT:</span> ${calc.output}
                </p>
            </li>`).join('');
        
        historyContent.innerHTML = `
            <ul class="space-y-3 mb-6">${historyList}</ul>
            <button id="clear-history-btn" class="w-full bg-rose-900/50 hover:bg-rose-800/70 border border-rose-800/50 text-rose-300 font-bold py-2 px-4 rounded-lg transition-colors text-sm">
                Clear History
            </button>`;
        
        document.getElementById('clear-history-btn').addEventListener('click', () => {
            history = [];
            saveHistory();
            renderHistory();
        });
    };
    
    // --- UI HELPERS ---
    const showResult = (wrapper, content, onSave, onCopy) => {
        wrapper.innerHTML = `
            <div>
                ${content}
                <div class="absolute top-2 right-2 flex space-x-2">
                    <button data-action="save" title="Save Calculation" class="text-zinc-400 hover:text-cyan-400 transition-colors">${ICONS.save}</button>
                    <button data-action="copy" title="Copy to Clipboard" class="text-zinc-400 hover:text-cyan-400 transition-colors">${ICONS.copy}</button>
                </div>
            </div>`;
        
        const copyBtn = wrapper.querySelector('[data-action="copy"]');
        wrapper.querySelector('[data-action="save"]').addEventListener('click', onSave);
        copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(onCopy());
            copyBtn.innerHTML = ICONS.check;
            setTimeout(() => { copyBtn.innerHTML = ICONS.copy; }, 2000);
        });
    };

    const showError = (wrapper, message) => {
        wrapper.innerHTML = `<p class="text-md text-rose-400 text-center">${message}</p>`;
    };
    
    const showPlaceholder = (wrapper, message) => {
         wrapper.innerHTML = `<p class="text-zinc-600">${message}</p>`;
    };

    // --- RESISTOR DECODER LOGIC ---
    const formatResistance = (value) => {
        if (value >= 1_000_000_000) return `${(value / 1_000_000_000).toPrecision(3)} GΩ`;
        if (value >= 1_000_000) return `${(value / 1_000_000).toPrecision(3)} MΩ`;
        if (value >= 1_000) return `${(value / 1_000).toPrecision(3)} kΩ`;
        return `${value.toPrecision(3)} Ω`;
    };
    
    decodeResistorBtn.addEventListener('click', () => {
        const bands = resistorBandsInput.value;
        const colorArray = bands.toLowerCase().split(',').map(c => c.trim().replace('gray', 'grey'));
        
        if (colorArray.length < 4 || colorArray.length > 5) {
            showError(resistorResultWrapper, 'Please enter 4 or 5 color bands.');
            return;
        }

        const bandValues = colorArray.map(color => RESISTOR_BANDS[color]);
        if (bandValues.some(v => v === undefined)) {
            showError(resistorResultWrapper, 'Invalid color name detected. Check for typos.');
            return;
        }
    
        try {
            let valueStr = '', multiplier, tolerance;

            if (colorArray.length === 4) { // 4-band
                valueStr = `${bandValues[0].digit}${bandValues[1].digit}`;
                multiplier = bandValues[2].multiplier;
                tolerance = bandValues[3].tolerance;
            } else { // 5-band
                valueStr = `${bandValues[0].digit}${bandValues[1].digit}${bandValues[2].digit}`;
                multiplier = bandValues[3].multiplier;
                tolerance = bandValues[4].tolerance;
            }
          
            if (tolerance === undefined) {
                showError(resistorResultWrapper, 'The last band is not a valid tolerance color.');
                return;
            }

            const resistanceValue = parseInt(valueStr, 10) * multiplier;
            const formattedValue = formatResistance(resistanceValue);
            const finalResult = `Resistance: ${formattedValue} ±${tolerance}%`;
            
            showResult(
                resistorResultWrapper,
                `<p class="text-lg text-emerald-400 font-mono text-center">${finalResult}</p>`,
                () => addToHistory('Resistor', bands, finalResult),
                () => finalResult
            );
        } catch (e) {
            showError(resistorResultWrapper, 'Could not calculate. Please check bands.');
        }
    });

    // --- OHM'S LAW LOGIC ---
    calculateOhmsBtn.addEventListener('click', () => {
        const V = parseFloat(ohmsVoltageInput.value);
        const I = parseFloat(ohmsCurrentInput.value);
        const R = parseFloat(ohmsResistanceInput.value);
        
        const filledInputs = [!isNaN(V), !isNaN(I), !isNaN(R)].filter(Boolean).length;
        if (filledInputs !== 2) {
            showError(ohmsResultWrapper, 'Please provide exactly two values.');
            return;
        }

        let calculatedResult = '', inputString = '';
        
        if (isNaN(V)) {
            const newV = I * R;
            ohmsVoltageInput.value = newV.toPrecision(4);
            calculatedResult = `Voltage (V) = ${newV.toPrecision(4)} V`;
            inputString = `I=${I} A, R=${R} Ω`;
        } else if (isNaN(I)) {
            if (R === 0) { showError(ohmsResultWrapper, "Resistance cannot be zero."); return; }
            const newI = V / R;
            ohmsCurrentInput.value = newI.toPrecision(4);
            calculatedResult = `Current (I) = ${newI.toPrecision(4)} A`;
            inputString = `V=${V} V, R=${R} Ω`;
        } else if (isNaN(R)) {
            if (I === 0) { showError(ohmsResultWrapper, "Current cannot be zero."); return; }
            const newR = V / I;
            ohmsResistanceInput.value = newR.toPrecision(4);
            calculatedResult = `Resistance (R) = ${newR.toPrecision(4)} Ω`;
            inputString = `V=${V} V, I=${I} A`;
        }
        
        showResult(
            ohmsResultWrapper,
            `<p class="text-lg text-emerald-400 font-mono text-center">${calculatedResult}</p>`,
            () => addToHistory("Ohm's Law", inputString, calculatedResult),
            () => calculatedResult
        );
    });

    clearOhmsBtn.addEventListener('click', () => {
        ohmsVoltageInput.value = '';
        ohmsCurrentInput.value = '';
        ohmsResistanceInput.value = '';
        showPlaceholder(ohmsResultWrapper, 'Result will appear here');
    });

    // --- CAPACITOR LOOKUP LOGIC ---
    const parseCapacitance = (input) => {
        const match = input.toLowerCase().match(/(\d*\.?\d+)\s*(p|n|u|µ)?f?/);
        if (!match) return null;
        const value = parseFloat(match[1]);
        const unit = match[2];
        switch (unit) {
            case 'p': return value;
            case 'n': return value * 1e3;
            case 'u': case 'µ': return value * 1e6;
            default: return value;
        }
    };

    const formatCapacitance = (value) => {
        if (value >= 1e6) return `${(value / 1e6).toPrecision(3)} µF`;
        if (value >= 1e3) return `${(value / 1e3).toPrecision(3)} nF`;
        return `${value.toPrecision(3)} pF`;
    };
    
    findCapacitorBtn.addEventListener('click', () => {
        const value = capacitorValueInput.value;
        const valInPF = parseCapacitance(value);
        
        if (valInPF === null || isNaN(valInPF)) {
            showError(capacitorResultWrapper, 'Invalid format. Use 100pF, 22nF, 0.1uF.');
            return;
        }
        
        let magnitude = Math.pow(10, Math.floor(Math.log10(valInPF)));
        let normalizedTarget = valInPF / magnitude;

        const find = (series) => {
            const closestBase = series.reduce((prev, curr) => (Math.abs(curr - normalizedTarget) < Math.abs(prev - normalizedTarget) ? curr : prev));
            return closestBase * magnitude;
        };
        
        const closestE12 = find(E_SERIES.E12);
        const closestE24 = find(E_SERIES.E24);
        
        const result = {
            e12: formatCapacitance(closestE12),
            e24: formatCapacitance(closestE24)
        };
        const resultString = `E12: ${result.e12}, E24: ${result.e24}`;
        
        const content = `
            <div class="text-center">
              <p class="text-zinc-400 text-sm">Closest E12 Value:</p>
              <p class="text-lg text-emerald-400 font-mono mb-2">${result.e12}</p>
              <p class="text-zinc-400 text-sm">Closest E24 Value:</p>
              <p class="text-lg text-emerald-400 font-mono">${result.e24}</p>
            </div>`;

        showResult(
            capacitorResultWrapper,
            content,
            () => addToHistory('Capacitor', value, resultString),
            () => resultString
        );
    });

    // --- INITIALIZATION ---
    loadHistory();
    renderHistory();
});
</script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
